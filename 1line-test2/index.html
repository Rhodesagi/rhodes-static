<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>1line test2</title><style>body{margin:0;padding:14px;background:#0b0f14;color:#d8d8d8;font:14px/1.35 monospace}#w{max-width:900px;margin:0 auto;border:2px solid #00ffd5;background:#060809}#h{padding:10px 12px 36px;background:#000;border-bottom:2px solid #00ffd5;text-align:center;position:relative;overflow:hidden}#top{display:flex;justify-content:center;gap:10px;align-items:flex-start;flex-wrap:wrap}#lb{display:inline-block;border:1px solid #00ffd5;background:#000;margin:0 0 6px;padding:10px 12px}#logo{display:inline-block;white-space:pre;color:#00ffd5;font:900 27px/1 monospace}#logo b{display:inline-block;min-width:.75em;text-align:center;border:1px solid #00ffd5;padding:2px 0;margin:1px;background:rgba(0,255,213,.06)}#logo b.sig{min-width:2.2em;padding:1px 2px;text-align:right;vertical-align:top;font-size:6px;line-height:1}#logo b.sig span{display:block}#sub{color:#8a9;font-size:12px}#c{padding:10px;overflow:auto}#i{background:#000;border-top:2px solid #444;padding:10px;position:sticky;bottom:0}form{display:flex;gap:8px;align-items:center;max-width:800px;margin:0 auto;width:100%}#row{position:relative;display:flex;min-width:0;flex:1}#p{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#00ffd5;font-weight:900;font-size:18px;line-height:1}input{flex:1;min-width:0;width:100%;background:#111;color:#00ffd5;border:1px solid #444;padding:12px 12px 12px 40px;font:16px monospace}button{background:#007c86;color:#fff;border:0;padding:12px 16px;font:700 14px monospace}#s{text-align:center;color:#888;font-size:12px;margin:0 0 6px}.m{margin:10px 0;padding:8px;border-left:3px solid #888;background:rgba(255,255,255,.05);color:#bbb}.u{border-left-color:#7aa7ff}.r{border-left-color:#00ffd5;color:#00ffd5}@media(max-width:600px){form{flex-direction:column}button{width:100%}}</style><body><div id=w><div id=h><div id=top><div id=lb><div id=logo><b>R</b><b>H</b><b>O</b><b>D</b><b>E</b><b>S</b><b>&nbsp;</b><b>1</b><b>L</b><b>I</b><b>N</b><b>E</b><b class=sig><span>|<br>||<br>|||<br>||||<br>â–ˆ||||</span></b></div></div></div><div id=sub>Minimal interface (low bandwidth)</div></div><div id=c></div><div id=i><div id=s></div><form id=f><div id=row><span id=p>&gt;</span><input id=t autocomplete=off placeholder="enter message..." autofocus></div><button>Send</button></form></div></div><script>(()=>{const G=i=>document.getElementById(i),c=G("c"),t=G("t"),s=G("s"),f=G("f");let w,ok=0,B="",E=null,stall=0,idle=0;const CID=localStorage.rhodes_1line_test2_cid||(localStorage.rhodes_1line_test2_cid="1t2_"+Math.random().toString(36).slice(2,10));const U=()=>{try{return crypto.randomUUID?crypto.randomUUID():Date.now().toString(16)+Math.random().toString(16).slice(2)}catch{return Date.now().toString(16)+Math.random().toString(16).slice(2)}};t.addEventListener("input",()=>{const v=t.value;if(v&&v[0]!==v[0].toUpperCase())t.value=v[0].toUpperCase()+v.slice(1)});addEventListener("beforeunload",e=>{if(c.childNodes.length){e.preventDefault();e.returnValue="";return""}});const A=(k,x)=>{const d=document.createElement("div");d.className="m "+k;d.textContent=x;c.appendChild(d);d.scrollIntoView({block:"end"});return d},S=x=>s.textContent=x,clr=()=>{stall&&clearTimeout(stall);idle&&clearTimeout(idle);stall=idle=0},WS=(location.protocol==="https:"?"wss://":"ws://")+location.host+"/ws";function C(){clr();S("Connecting...");ok=0;try{w=new WebSocket(WS)}catch{S("WebSocket unsupported");A("r","Rhodes: WebSocket unsupported");return}w.onopen=()=>w.send(JSON.stringify({msg_type:"auth_request",msg_id:U(),timestamp:new Date().toISOString(),payload:{client_id:CID,tab_id:U(),token:"",user_token:"",resume_session:""}}));w.onclose=()=>{clr();S("Disconnected; retrying...");setTimeout(C,1200)};w.onmessage=z=>{let m;try{m=JSON.parse(z.data)}catch{return}const p=m.payload||{};if(m.msg_type==="auth_response"){ok=!!p.success;S(ok?"Ready":"Auth failed");ok&&A("r","Rhodes: Rhodes System Initialized. You have 10 free guest messages. Create an account or login to continue for longer.")}else if(m.msg_type==="ai_message_chunk"){const x=p.content||"";if(!x)return;S("Thinking...");if(!E){B="";E=A("r","Rhodes: ")}B+=x;E.textContent="Rhodes: "+B;clr();idle=setTimeout(()=>S("Ready"),8000)}else if(m.msg_type==="ai_message"){const x=(p.content||"").trim();E=null;B="";x&&A("r","Rhodes: "+x);clr();S("Ready")}else if(m.msg_type==="guest_status"&&p.message){A("r","Rhodes: "+p.message);clr();S("Ready")}}}C();f.onsubmit=z=>{z.preventDefault();let m=t.value.trim();if(!m)return;let lc=m.toLowerCase();let cmd=lc[0]==="/" ? lc.slice(1):lc;if(cmd==="stop"||cmd==="interrupt"){t.value="";w&&w.readyState==1&&w.send(JSON.stringify({msg_type:"interrupt",msg_id:U(),payload:{reason:cmd}}));return}A("u","You: "+m);t.value="";clr();stall=setTimeout(()=>{S("Ready");E=null;B=""},180000);if(!w||w.readyState!==1||!ok){S("Not ready - reconnecting...");try{w&&w.close()}catch{};C();return}S("Thinking...");w.send(JSON.stringify({msg_type:"user_message",msg_id:U(),timestamp:new Date().toISOString(),payload:{content:m,stream:true}}));t.focus()}})();</script>
